{"ast":null,"code":"import { Api } from \"./api\";\nimport { getGeneralApiProblem } from \"./api/api-problem\";\nexport class UserApi extends Api {\n  convertUser(raw) {\n    return {\n      id: raw.id,\n      username: raw.username,\n      email: raw.email,\n      admin: raw.admin,\n      active: raw.active\n    };\n  }\n  async getUserById(token) {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response = await this.apisauce.get(`/api/v1/users/${token}`);\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n    try {\n      const user = response.data.data;\n      return {\n        kind: \"ok\",\n        user: user\n      };\n    } catch {\n      return {\n        kind: \"bad-data\"\n      };\n    }\n  }\n  async getUsers(token) {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response = await this.apisauce.get(\"/api/v1/users\");\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n    try {\n      const rawUsers = response.data;\n      const resultUsers = rawUsers.map(this.convertUser);\n      return {\n        kind: \"ok\",\n        users: resultUsers\n      };\n    } catch {\n      return {\n        kind: \"bad-data\"\n      };\n    }\n  }\n}","map":{"version":3,"names":["Api","getGeneralApiProblem","UserApi","convertUser","raw","id","username","email","admin","active","getUserById","token","apisauce","setHeader","response","get","ok","problem","user","data","kind","getUsers","rawUsers","resultUsers","map","users"],"sources":["/usr/src/app/services/users.ts"],"sourcesContent":["import { Api } from \"./api\";\nimport { ApiResponse } from \"apisauce\";\nimport { GeneralApiProblem, getGeneralApiProblem } from \"./api/api-problem\";\nimport { User } from \"./types\";\n\nexport type GetUsersResult = { kind: \"ok\"; users: User[] } | GeneralApiProblem;\nexport type GetUserResult = { kind: \"ok\"; user: User } | GeneralApiProblem;\n\nexport class UserApi extends Api {\n  convertUser(raw): User {\n    return {\n      id: raw.id,\n      username: raw.username,\n      email: raw.email,\n      admin: raw.admin,\n      active: raw.active\n    };\n  }\n\n  async getUserById(token: string): Promise<GetUserResult> {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response: ApiResponse<any> = await this.apisauce.get(\n      `/api/v1/users/${token}`\n    );\n\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n\n    try {\n      const user: User = response.data.data;\n      return { kind: \"ok\", user: user };\n    } catch {\n      return { kind: \"bad-data\" };\n    }\n  }\n\n  async getUsers(token: string): Promise<GetUsersResult> {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response: ApiResponse<any> = await this.apisauce.get(\"/api/v1/users\");\n\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n\n    try {\n      const rawUsers = response.data;\n      const resultUsers: User[] = rawUsers.map(this.convertUser);\n      return { kind: \"ok\", users: resultUsers };\n    } catch {\n      return { kind: \"bad-data\" };\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,OAAO;AAE3B,SAA4BC,oBAAoB,QAAQ,mBAAmB;AAM3E,OAAO,MAAMC,OAAO,SAASF,GAAG,CAAC;EAC/BG,WAAWA,CAACC,GAAG,EAAQ;IACrB,OAAO;MACLC,EAAE,EAAED,GAAG,CAACC,EAAE;MACVC,QAAQ,EAAEF,GAAG,CAACE,QAAQ;MACtBC,KAAK,EAAEH,GAAG,CAACG,KAAK;MAChBC,KAAK,EAAEJ,GAAG,CAACI,KAAK;MAChBC,MAAM,EAAEL,GAAG,CAACK;IACd,CAAC;EACH;EAEA,MAAMC,WAAWA,CAACC,KAAa,EAA0B;IACvD,IAAI,CAACC,QAAQ,CAACC,SAAS,CAAC,eAAe,EAAG,UAASF,KAAM,EAAC,CAAC;IAC3D,MAAMG,QAA0B,GAAG,MAAM,IAAI,CAACF,QAAQ,CAACG,GAAG,CACvD,iBAAgBJ,KAAM,EACzB,CAAC;IAED,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAMC,OAAO,GAAGhB,oBAAoB,CAACa,QAAQ,CAAC;MAC9C,IAAIG,OAAO,EAAE,OAAOA,OAAO;IAC7B;IAEA,IAAI;MACF,MAAMC,IAAU,GAAGJ,QAAQ,CAACK,IAAI,CAACA,IAAI;MACrC,OAAO;QAAEC,IAAI,EAAE,IAAI;QAAEF,IAAI,EAAEA;MAAK,CAAC;IACnC,CAAC,CAAC,MAAM;MACN,OAAO;QAAEE,IAAI,EAAE;MAAW,CAAC;IAC7B;EACF;EAEA,MAAMC,QAAQA,CAACV,KAAa,EAA2B;IACrD,IAAI,CAACC,QAAQ,CAACC,SAAS,CAAC,eAAe,EAAG,UAASF,KAAM,EAAC,CAAC;IAC3D,MAAMG,QAA0B,GAAG,MAAM,IAAI,CAACF,QAAQ,CAACG,GAAG,CAAC,eAAe,CAAC;IAE3E,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAMC,OAAO,GAAGhB,oBAAoB,CAACa,QAAQ,CAAC;MAC9C,IAAIG,OAAO,EAAE,OAAOA,OAAO;IAC7B;IAEA,IAAI;MACF,MAAMK,QAAQ,GAAGR,QAAQ,CAACK,IAAI;MAC9B,MAAMI,WAAmB,GAAGD,QAAQ,CAACE,GAAG,CAAC,IAAI,CAACrB,WAAW,CAAC;MAC1D,OAAO;QAAEiB,IAAI,EAAE,IAAI;QAAEK,KAAK,EAAEF;MAAY,CAAC;IAC3C,CAAC,CAAC,MAAM;MACN,OAAO;QAAEH,IAAI,EAAE;MAAW,CAAC;IAC7B;EACF;AACF"},"metadata":{},"sourceType":"module"}